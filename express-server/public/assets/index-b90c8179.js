import{R as W,a as y,u as G,b as oe,c as _,s as ie,d as ae,p as J,r as o,j as e,C as D,T as j,e as A,I as le,f as ce,V as de,g as ue,B as S,S as H,A as E,h as k,i as ge,k as K,l as Q,m as he,n as Y,o as me,q as pe,t as fe,G as V,v as xe,w as ye,x,y as je,z as we,D as Ce}from"./vendor-1135ea8a.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function l(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(n){if(n.ep)return;n.ep=!0;const r=l(n);fetch(n.href,r)}})();const M=W({key:"personState",default:{username:"",password:"",isLoading:!0}}),ve=y({key:"nameState",get:({get:t})=>t(M).username}),be=y({key:"passwordState",get:({get:t})=>t(M).password});y({key:"personIsLoadingState",get:({get:t})=>t(M).isLoading});y({key:"personDetails",get:({get:t})=>t(M)});function N(t){const s=G(),l=oe(M),c=_(ve),n=_(be),r={username:c,password:n},i=ie.safeParse(r),a=ae.safeParse(c),m=J.safeParse(n),[p,T]=o.useState(!1),[O,$]=o.useState(!1),[U,B]=o.useState(!1),[P,R]=o.useState(""),[q,z]=o.useState(!1),L=async()=>{var C;if(z(!0),setTimeout(()=>{$(!1),z(!1),R("")},3e3),i.success){const f=i.data.username,v=i.data.password;try{const w=(await k.post(t.url,{username:f,password:v})).data;R(w.message),t.role==="user"&&(t.action==="Login"&&(localStorage.setItem("token",w.token),console.log(w),setTimeout(()=>{s("/user/courses")},3e3)),t.action==="Signup"&&setTimeout(()=>{s("/")},3e3)),t.role==="admin"&&(t.action==="Login"&&(localStorage.setItem("token",w.token),console.log(w),setTimeout(()=>{s("/admin/courses")},3e3)),t.action==="Signup"&&setTimeout(()=>{s("/admin/login")},3e3)),$(!0),B(!1)}catch(u){console.log(u),u instanceof ge?R((C=u.response)==null?void 0:C.data.message):(console.log(u),R(JSON.stringify(u))),$(!0),B(!0)}}else{const f=[];for(let v=0;v<i.error.errors.length;v++){const u=i.error.errors[v].message;f.push(`${u}`),R(w=>w+f[v]+`
`),$(!0),B(!0)}}};return e.jsxs("div",{style:{display:"flex",justifyContent:"center"},children:[e.jsxs(D,{style:{height:300,width:400,display:"flex",flexFlow:"column",justifyContent:"space-evenly",borderRadius:20,padding:20},children:[e.jsxs(j,{style:{textAlign:"center"},variant:"h4",children:[t.action," below"]}),e.jsx(A,{autoFocus:!0,label:"username",onChange:C=>{l(f=>({...f,username:C.target.value}))},error:!a.success}),e.jsx(A,{type:p?"text":"password",label:"password",onChange:C=>{l(f=>({...f,password:C.target.value}))},error:!m.success,InputProps:{style:{color:"#ff44336"},endAdornment:e.jsx(le,{position:"end",children:e.jsx(ce,{onClick:()=>{T(!p)},children:p?e.jsx(de,{}):e.jsx(ue,{})})})}}),e.jsx(S,{style:{width:"25%",borderRadius:20},variant:"contained",onClick:L,disabled:q,children:t.action})]}),e.jsx(H,{style:{marginTop:50},open:O,anchorOrigin:{vertical:"top",horizontal:"left"},children:U?e.jsx(E,{severity:"error",style:{whiteSpace:"pre-line",borderRadius:25,backgroundColor:"#ffcdd2"},children:e.jsx("div",{dangerouslySetInnerHTML:{__html:P}})}):e.jsx(E,{severity:"success",style:{borderRadius:25,backgroundColor:"greenyellow"},children:P})})]})}const g="http://localhost:3000";function Se(){return e.jsx("div",{style:{marginTop:120},children:e.jsx(N,{url:`${g}/admin/signup`,action:"Signup",role:"admin"})})}function ke(){return e.jsx("div",{style:{marginTop:120},children:e.jsx(N,{url:`${g}/user/signup`,action:"Signup",role:"user"})})}function Ie(){return e.jsx("div",{style:{marginTop:120},children:e.jsx(N,{url:`${g}/admin/login`,action:"Login",role:"admin"})})}function X(){return e.jsx("div",{style:{marginTop:120},children:e.jsx(N,{url:`${g}/user/login`,action:"Login",role:"user"})})}const Te=W({key:"outgoingCourseState",default:{_id:"",title:"",description:"",imageLink:"",price:0,published:!1}}),I=W({key:"incomingCourseState",default:{_id:"",title:"",description:"",imageLink:"",price:0,published:!1}}),Re=y({key:"ItitleState",get:({get:t})=>t(I).title}),Le=y({key:"IdescriptionState",get:({get:t})=>t(I).description}),Ae=y({key:"IimageLinkState",get:({get:t})=>t(I).imageLink}),$e=y({key:"IpriceState",get:({get:t})=>t(I).price});y({key:"IidState",get:({get:t})=>t(I)._id});y({key:"IpublishedState",get:({get:t})=>t(I).published});y({key:"IcourseDetailsState",get:({get:t})=>t(I)});function Z(t){const s=localStorage.getItem("token"),{courseId:l}=K(),c=G(),[n,r]=Q(Te),i=_(Re),a=_(Le),m=_(Ae),p=_($e),[T,O]=o.useState(i),[$,U]=o.useState(a),[B,P]=o.useState(m),[R,q]=o.useState(p),[z,L]=o.useState(""),[C,f]=o.useState(!1),[v,u]=o.useState(!1);o.useEffect(()=>{r(d=>({...d,title:i,description:a,imageLink:m,price:p}))},[i,a,m,p,O,U,q,P]);const w=t.reqType,F=he.safeParse(n),ne=async()=>{if(L(""),F.success){const d=F.data,b=(await k[w](t.url,d,{headers:{authorization:`Bearer ${s}`}})).data;u(!0),b.message&&(f(!1),L(b.message),setTimeout(()=>{u(!1)},3e3)),b.error&&(f(!0),L(b.error),setTimeout(()=>{u(!1)},3e3))}else{const d=[];for(let h=0;h<F.error.errors.length;h++){const b=F.error.errors[h].message;d.push(b),L(re=>re+d[h]+`
`),u(!0),f(!0)}setTimeout(()=>{u(!1)},3e3)}};return e.jsxs("div",{style:{display:"flex",justifyContent:"center"},children:[e.jsxs(D,{style:{width:450,height:450,borderRadius:20,display:"flex",flexFlow:"column",justifyContent:"space-evenly",padding:20},children:[e.jsxs(j,{variant:"h4",textAlign:"center",children:[t.action," course"]}),e.jsx(A,{label:"title",value:T,autoFocus:!0,onChange:d=>{O(d.target.value),r(h=>({...h,title:d.target.value}))}}),e.jsx(A,{label:"description",value:$,onChange:d=>{U(d.target.value),r(h=>({...h,description:d.target.value}))}}),e.jsx(A,{label:"image link",value:B,onChange:d=>{P(d.target.value),r(h=>({...h,imageLink:d.target.value}))}}),e.jsx(A,{label:"price",type:"number",value:R,onChange:d=>{const h=parseFloat(d.target.value);q(h),r(b=>({...b,price:h}))}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(S,{variant:"contained",style:{width:"25%",borderRadius:20},onClick:ne,children:"Save"}),t.action==="Edit"?e.jsx(S,{style:{backgroundColor:"#f44336",color:"#ffebee",borderRadius:25,width:"25%"},onClick:async()=>{const d=await k.delete(`${g}/admin/course/${l}`,{headers:{authorization:`Bearer ${s}`}});L(d.data.message),u(!0),setTimeout(()=>{u(!1),c("/admin/courses")},3e3)},children:"Delete"}):null]})]}),e.jsx(H,{style:{marginTop:50},open:v,anchorOrigin:{vertical:"top",horizontal:"left"},children:C?e.jsx(E,{variant:"standard",severity:"error",style:{whiteSpace:"pre-line",borderRadius:25,backgroundColor:"#ffcdd2"},children:e.jsx("div",{dangerouslySetInnerHTML:{__html:z}})}):e.jsx(E,{variant:"standard",style:{borderRadius:25,backgroundColor:"greenyellow"},severity:"success",children:z})})]})}function _e(){return e.jsx("div",{style:{marginTop:120},children:e.jsx(Z,{action:"Add",reqType:"post",url:`${g}/admin/addCourse`})})}function Ee(){const[t,s]=o.useState(""),l=J.safeParse(t);return e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsxs(D,{style:{width:450,height:120,marginTop:120,display:"flex",flexFlow:"column",justifyContent:"space-evenly",padding:20,borderRadius:20},children:[e.jsx(j,{variant:"h4",textAlign:"center",children:"Type here"}),e.jsx(A,{label:"username",onChange:c=>{s(c.target.value)},error:!l.success})]})})}function Be(){const[t,s]=Q(I),l=localStorage.getItem("token"),{courseId:c}=K(),[n,r]=o.useState();return o.useEffect(()=>{async function i(){const a=await k.get(`${g}/admin/courses`,{headers:{authorization:`Bearer ${l}`}});r(a);const p=a.data.courses.find(T=>T._id===c);s(p!==void 0?p:{_id:"",title:"",description:"",imageLink:"",price:0,published:!1})}i()},[]),n&&t._id!==""?e.jsx("div",{style:{marginTop:120},children:e.jsx(Z,{action:"Edit",reqType:"put",url:`${g}/admin/course/${c}`})}):e.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:50},children:e.jsx(Y,{style:{color:"primary"},size:80})})}function ee(t){const[s,l]=o.useState(""),[c,n]=o.useState(!1),r=t.course._id,i=G();let a;t.action==="Buy"&&(a="post");const m=async()=>{if(t.action==="Edit"&&i(`/admin/editCourse/${r}`),t.action==="Buy"){const p=localStorage.getItem("token"),T=await k[a](`${g}/user/course/${r}`,{},{headers:{authorization:`Bearer ${p}`}});n(!0),l(T.data.message),setTimeout(()=>{n(!1)},3e3)}};return e.jsxs("div",{style:{padding:15},children:[e.jsxs(D,{style:{width:300,height:320,borderRadius:10,padding:5,display:"flex",flexFlow:"column",justifyContent:"space-between"},children:[e.jsx(j,{textAlign:"center",variant:"h4",children:t.course.title}),e.jsx(j,{textAlign:"center",variant:"body1",children:t.course.description}),e.jsx(me,{display:"flex",justifyContent:"center",children:e.jsx(D,{style:{width:"90%"},children:e.jsx(pe,{component:"img",src:t.course.imageLink})})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:3,marginBottom:3},children:[e.jsxs(j,{variant:"body2",children:["â‚¹ ",t.course.price,"/-"]}),e.jsx(S,{variant:"contained",style:{borderRadius:25},size:"small",onClick:m,children:t.action})]})]}),e.jsx(H,{anchorOrigin:{vertical:"top",horizontal:"left"},open:c,children:e.jsx(E,{severity:"success",style:{backgroundColor:"greenyellow",borderRadius:25},children:s})})]})}function te(t){const s=t.reqType,[l,c]=o.useState([]);return o.useEffect(()=>{const n=localStorage.getItem("token");(async()=>{const a=(await k[s](t.url,{headers:{authorization:`Bearer ${n}`}})).data.courses;c(a)})()},[]),l.length>0?e.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center"},children:l.map(n=>e.jsx(ee,{course:n,action:t.action,buttonUrl:""},n._id))}):e.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:50},children:e.jsx(Y,{style:{color:"primary"},size:80})})}function Pe(){return e.jsx("div",{children:e.jsx(te,{url:`${g}/admin/courses`,action:"Edit",reqType:"get"})})}function ze(){return e.jsx("div",{children:e.jsx(te,{url:`${g}/user/courses`,action:"Buy",reqType:"get"})})}function se(t){console.log(t.allCoursesUrl);const[s,l]=o.useState(null),[c,n]=o.useState(null),r=localStorage.getItem("token");if(o.useEffect(()=>{(async()=>{const m=await k.get(t.url,{headers:{authorization:`Bearer ${r}`}});n(m.data.myCourses)})(),(async()=>{const m=await k.get(t.allCoursesUrl,{headers:{authorization:`Bearer ${r}`}});l(m.data.courses)})()},[]),s!==null&&c!==null){console.log(s),console.log(c);const i=s.filter(a=>c.includes(a._id));if(i.length>0)return console.log(i),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center"},children:i.map(a=>e.jsx(ee,{course:a,action:t.action,buttonUrl:""}))});{let a;return t.action==="Edit"?a="created":a="purchased",e.jsx("div",{children:e.jsxs(j,{variant:"h3",textAlign:"center",style:{marginTop:40},children:["You have not ",a," any courses."]})})}}else return e.jsx("div",{children:e.jsx(Y,{})})}function De(){return e.jsx("div",{children:e.jsx(se,{url:`${g}/user/myCourses`,allCoursesUrl:`${g}/user/courses`,action:"View Details"})})}function Me(){return e.jsx("div",{children:e.jsx(se,{url:`${g}/admin/myCourses`,allCoursesUrl:`${g}/admin/courses`,action:"Edit"})})}function Oe(){const t=G(),[s,l]=o.useState(!1);return e.jsxs("div",{style:{padding:40},children:[e.jsxs(fe,{style:{display:"flex",flexFlow:"row",justifyContent:"space-between",padding:5},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("img",{src:"https://i.redd.it/fhs2f867erpb1.png",style:{maxHeight:"55px"}}),e.jsx(j,{variant:"h3",children:"Coursera"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-evenly",width:"30%",marginTop:10},children:[window.location.pathname==="/admin/courses"||window.location.pathname==="/admin/myCourses"?e.jsx(S,{variant:"contained",style:{backgroundColor:"#64b5f6",height:"70%",borderRadius:25},onClick:()=>{t("/admin/addCourse")},children:"Add course"}):null,window.location.pathname==="/user/login"||window.location.pathname==="/admin/login"||window.location.pathname==="/"?e.jsx(S,{variant:"contained",style:{backgroundColor:"#64b5f6",height:"70%",borderRadius:25},onClick:()=>{window.location.pathname==="/admin/login"?t("admin/signup"):t("/user/signup")},children:"SignUp"}):null,window.location.pathname!=="/admin/myCourses"&&window.location.pathname!=="/user/myCourses"&&window.location.pathname!=="/user/signup"&&window.location.pathname!=="/admin/signup"&&window.location.pathname!=="/admin/login"&&window.location.pathname!=="/user/login"&&window.location.pathname!=="/"?e.jsx(S,{onClick:()=>{(window.location.pathname==="/admin/courses"||window.location.pathname==="/admin/addCourse")&&t("/admin/myCourses"),window.location.pathname==="/user/courses"&&t("/user/myCourses")},variant:"contained",style:{backgroundColor:"#64b5f6",height:"70%",borderRadius:25},children:"My Courses"}):null,window.location.pathname!=="/admin/signup"&&window.location.pathname!=="/admin/login"&&window.location.pathname!=="/user/signup"&&window.location.pathname!=="/user/login"&&window.location.pathname!=="/"?e.jsx(S,{onClick:()=>{t("/"),localStorage.clear(),l(!0),setTimeout(()=>{l(!1)},3e3)},variant:"contained",style:{backgroundColor:"#64b5f6",height:"70%",borderRadius:25},children:"Logout"}):null]})]}),e.jsx(H,{anchorOrigin:{vertical:"top",horizontal:"left"},open:s,children:e.jsx(E,{severity:"success",style:{backgroundColor:"greenyellow",borderRadius:25},children:"You've been logged out"})})]})}function Ue(){return e.jsxs("div",{style:{marginTop:20,minHeight:"100vh",backgroundColor:""},children:[e.jsxs(V,{container:!0,style:{padding:20},children:[e.jsx(V,{item:!0,xs:12,md:12,lg:5,style:{backgroundColor:"",textAlign:"center"},children:e.jsxs("div",{children:[e.jsx(j,{variant:"h3",children:"Welcome to Coursera knockoff!"}),e.jsx(X,{})]})}),e.jsx(V,{item:!0,xs:0,md:0,lg:7,style:{display:"flex",flexFlow:"column",justifyContent:"center",backgroundColor:""},children:e.jsx("img",{style:{borderRadius:25,maxHeight:"600px"},src:"https://insight.study.csu.edu.au/wp-content/uploads/2020/04/banner-deep-dive-online.jpg"})})]}),e.jsx("div",{children:e.jsx(j,{variant:"body2",style:{marginLeft:90},children:e.jsx("a",{href:"/admin/login",style:{color:"blue",textDecoration:"underline"},children:"Login as Admin?"})})})]})}function qe(){return e.jsxs(xe,{children:[e.jsx(Oe,{}),e.jsxs(ye,{children:[e.jsx(x,{path:"/",element:e.jsx(Ue,{})}),e.jsx(x,{path:"/admin/signup",element:e.jsx(Se,{})}),e.jsx(x,{path:"/user/signup",element:e.jsx(ke,{})}),e.jsx(x,{path:"/admin/login",element:e.jsx(Ie,{})}),e.jsx(x,{path:"/user/login",element:e.jsx(X,{})}),e.jsx(x,{path:"/admin/addCourse",element:e.jsx(_e,{})}),e.jsx(x,{path:"/admin/editCourse/:courseId",element:e.jsx(Be,{})}),e.jsx(x,{path:"/red",element:e.jsx(Ee,{})}),e.jsx(x,{path:"/admin/courses",element:e.jsx(Pe,{})}),e.jsx(x,{path:"/user/courses",element:e.jsx(ze,{})}),e.jsx(x,{path:"/user/myCourses",element:e.jsx(De,{})}),e.jsx(x,{path:"/admin/myCourses",element:e.jsx(Me,{})})]})]})}je.createRoot(document.getElementById("root")).render(e.jsx(we.StrictMode,{children:e.jsx(Ce,{children:e.jsx(qe,{})})}));
